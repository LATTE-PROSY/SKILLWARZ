try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="876336a1-ec6e-4a11-b6e2-32ecfe80e571",e._sentryDebugIdIdentifier="sentry-dbid-876336a1-ec6e-4a11-b6e2-32ecfe80e571")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:crazygames-portal":!0})}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[46307],{57780:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(74848),o=r(96540),n=r(89706);let s=o.memo(e=>(0,a.jsx)(n.A,{...e,viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.25759 2.33006C7.62758 1.92004 8.25992 1.88759 8.66994 2.25758L16.9814 9.75758C18.3395 10.9831 18.3395 13.0169 16.9814 14.2424L8.66994 21.7424C8.25992 22.1124 7.62758 22.08 7.25759 21.6699C6.88759 21.2599 6.92005 20.6276 7.33007 20.2576L15.6415 12.7576C16.1195 12.3263 16.1195 11.6737 15.6415 11.2424L7.33007 3.74242C6.92005 3.37242 6.88759 2.74009 7.25759 2.33006Z"})}))},46307:(e,t,r)=>{"use strict";r.d(t,{A:()=>W,S:()=>J});var a=r(74848),o=r(96540),n=r(88599),s=r(70111),i=r(16546),l=r(341),c=r(12896),d=r(79004),u=r(49704),g=r(63522),f=r(59386),p=r(30804),m=r(16448),y=r(94438),w=r(8379),_=r(45249),v=r(53436),b=r(38131),h=r(59785),P=r(98825),B=r(9020),k=r(67023),C=r(64996),z=r(90321),I=r(46961);let S=z.X1;I.kk,I.JO,I.Ui;var A=r(97307),x=r(24747),E=r(66961);let R=e=>{let{gfSource:t}=e,{services:r}=o.useContext(C.A),a=r.crazyAnalyticsService,{pageUrlHelper:n}=o.useContext(E.e),{czyExpAnalyticsV2:s}=o.useContext(p.H);return o.useEffect(()=>{(async()=>{let e=await a.analyticsInfo();n.isOnPreviewPage()&&(e.enabled=!1),t.window?.postMessage({type:"analyticsInfoGF",data:{analyticsInfo:{...e,useV2:"enabled"===s}}},"*")})()},[a,t,n,s]),null};var M=r(36490),D=r(45300);let G={rewarded:null,interstitial:null};function T(e){switch(e){case"rewarded":return"rewarded";case"midroll":case"preroll":return"interstitial"}}function F(e,t,r){let a=D.A.Instance.data.advertizing.adMob.adUnitId[e][t];return r?a[r]??a.default:a.default}async function N(e,t){let r=T(e),a=F(i.Ii.getPlatform(),r,t);await j(a,r)}async function O(e,t){let r=T(e),a=F(i.Ii.getPlatform(),r,t);await U(a,r)}async function U(e,t){let r=G[t];if(r&&r.adUnitId===e&&!(Date.now()-r.preparedAt>354e4))return;let a="development"===D.A.Instance.environment;switch(t){case"rewarded":await M.IW.prepareRewardVideoAd({adId:e,isTesting:a});break;case"interstitial":await M.IW.prepareInterstitial({adId:e,isTesting:a});break;default:throw Error(`Unhandled AdMobVideoType: ${t}`)}G[t]={adUnitId:e,preparedAt:Date.now()}}async function j(e,t){try{switch(await U(e,t),G[t]=null,t){case"rewarded":await M.IW.showRewardVideoAd();break;case"interstitial":await M.IW.showInterstitial();break;default:throw Error(`Unhandled AdMobVideoType: ${t}`)}}catch(e){console.error(e)}}let q=e=>{let{theatreModeAvailable:t,gfSource:r}=e;return o.useEffect(()=>{t?r.window?.postMessage("set-status-theatre-mode-enabled","*"):r.window?.postMessage("set-status-theatre-mode-disabled","*")},[t,r]),null};var L=r(35531);let V=e=>{let{game:t,gfSource:r}=e,{user:a,loadingUser:n}=o.useContext(f.R),{user:s,refetch:i}=g.Jd(),l=(0,L.S)(),[c,d]=o.useState(!1),u=o.useRef(!1),{openedDrawer:p}=o.useContext(h.l9),{favouriteGames:m}=g.oS(),y=m.some(e=>e.slug===t.slug);return o.useEffect(()=>{p&&["signIn","signUpEmail"].includes(p.drawer)&&d(!0)},[p]),o.useEffect(()=>{c&&a&&!u.current&&(u.current=!0,async function(){let e=await i();if(!e.data){u.current=!1;return}let t=e.data.me,o={username:`${t.username}`,profilePictureUrl:`${D.A.Instance.data.images}${t.profile.avatar}`};r.window?.postMessage({type:"userLoggedIn",data:{userId:a.uid,userData:o,email:a?.email||void 0}},"*")}())},[a,r,i,c]),o.useEffect(()=>{if(n)return;let e=s?{username:`${s.username}`,profilePictureUrl:`${D.A.Instance.data.images}${s.profile.avatar}`}:void 0,t={type:"userPortalInfoSync",data:{userId:a?.uid,userData:e,isFavouriteGame:y,email:a?.email||void 0,profileCompleteStatus:{isComplete:100===l,hasGender:s?.profile.gender!==null}}};r.window?.postMessage(t,"*")},[y,n,a,s,r,l]),null},J=null,W=e=>{let{game:t,theatreModeAvailable:r}=e,{user:z,loadingUser:I}=o.useContext(f.R),E=o.useContext(P.d),{openDrawer:M}=o.useContext(h.lv),{favouriteGames:D}=g.oS(),G=g.fr(),T=g.T0(),{services:F}=o.useContext(C.A),{routeHelper:U}=o.useContext(_.A),{setProgressIconStatus:j,resetGameInvites:L,setGameInviteLink:W,gameInviteLink:$,mountedTime:Q}=o.useContext(B.Tz),{czyExpSignUpRewards_CZY_16266:H}=o.useContext(p.H),{crazyRouterChange:X}=o.useContext(k.G),Z=(0,s.m)(),{user:Y}=g.Jd(),K=D.some(e=>e.slug===t.slug),[ee,et]=o.useState(null),er=F.experimentService,ea=u.QB(),eo=(0,m.t)(),[en]=g.BX(),{vote:es,loading:ei}=(0,y.Z)(t),el=(0,v.hO)(t.slug);return(o.useEffect(()=>{let e=async e=>{let{requestType:t,rawGraphqlString:r,variables:a,fetchPolicy:o,errorPolicy:s="all",callbackId:i}=e.data;try{let l=(0,d.qg)(r);if("query"===t){let t=await Z.query({query:l,variables:a,fetchPolicy:o,errorPolicy:s}),r={resultData:t.data,errors:t.error?[t.error]:void 0,networkStatus:t.error?n.pT.error:n.pT.ready,callbackId:i};e.source?.postMessage({type:"forwardToUpGraphqlResponse",data:r},"*")}else if("mutation"===t){let t=await Z.mutate({mutation:l,fetchPolicy:"no-cache",variables:a,errorPolicy:s,context:{queryDeduplication:!1}}),r={resultData:t.data,errors:t.errors,callbackId:i};e.source?.postMessage({type:"forwardToUpGraphqlResponse",data:r},"*")}}catch(r){console.error("[UPGFConnector]",JSON.stringify(r));let t={resultData:null,errors:[r.message?r.message:JSON.stringify(r)],callbackId:i};e.source?.postMessage({type:"forwardToUpGraphqlResponse",data:t},"*")}},a=async(e,r,a)=>{if(!t.leaderboardOptions||!(0,c.isDefined)(Y)||!Y.privacy.enableLeaderboards){let e=[];t.leaderboardOptions||e.push("leaderboard options is not defined"),(0,c.isDefined)(Y)||e.push("user data is not defined"),(0,c.isDefined)(Y)&&!Y.privacy.enableLeaderboards&&e.push("leaderboards not enabled in user privacy settings"),console.log(`Score submission is not allowed: ${e.join(", ")}`);return}let o=Z.readQuery({query:A.B8,variables:{gameIds:[e]}}),n=o?.me?.currentSeasonScoresForGames?.find(t=>t.gameId===e)?.score,s=await Z.mutate({mutation:S,fetchPolicy:"no-cache",variables:{input:{gameId:e,encryptedScore:r,requestId:a}},errorPolicy:"all",context:{queryDeduplication:!1},refetchQueries:[{query:A.B8,variables:{gameIds:[e]}},{query:A.pz,variables:{gameId:e}}],awaitRefetchQueries:!0});if(s.data?.submitScore){let t=Z.readQuery({query:A.B8,variables:{gameIds:[e]}}),r=t?.me?.currentSeasonScoresForGames?.find(t=>t.gameId===e);if(r){let e=r.score;if(n&&n===e)return;let t=parseFloat(e);F.crazyAnalyticsService.leaderboardEvent("gamepage","scoreupdated",{score:{value:t,globalRank:r.overallRank,countryRank:r.countryRank,friendsRank:r.friendsRank}})}}},o=e=>{let t=!!JSON.parse(b.A.Instance.getItem(x.r_)||"false"),a=!!JSON.parse(b.A.Instance.getItem(x.zW)||"false"),o={type:"gfInit",data:{userAccountAvailable:!0,userExpected:t,theatreModeAvailable:r,wasUserLoggedIn:a,email:z?.email?.trim().toLowerCase().replace(/\+[^@]*@/g,"@")||void 0,useSignUpRewardExperiment:function(e){if(!(0,c.isDefined)(e))return!1;switch(e){case"enabled":return!0;case"disabled":return!1}}(H),vote:z?es:el,applicationType:(0,w.D)(),useNativeAds:i.Ii.isNativePlatform(),pageVisitId:F.crazyAnalyticsService.getPageVisitId()}};e.source?.postMessage(o,"*"),et({window:e.source}),J={window:e.source}},s=e=>{E.openFeedbackDrawer("game",{feedbackSource:e,gameFeedbackOptions:{game:t,mountedTime:Q||void 0}})},u=async r=>{if(r.data&&r.data.type===l.x)switch(r.data.event){case"sessionStart":F.experimentService.registerGameframeExperiments(r.data.experiments);break;case"requestToFavouriteGame":z?G({id:t.id,slug:t.slug,name:t.slug,cover:t.cover,covers:t.covers,videos:t.videos,status:t.status,iosFriendly:!0,androidFriendly:!0,mobileFriendly:!0,gameThumbLabels:[]}):M("myGames-favourite");break;case"requestToUnFavouriteGame":z?T(t.id):M("myGames");break;case"forwardToUpGraphql":await e(r);break;case"requestGfInit":o(r);break;case"redirectToHomepage":{let e=U.homePageLink();X(e.href,e.as);break}case"refreshGamePage":window.location.reload();break;case"browserBack":window.history.back();break;case"openProgressStatusDrawer":j(r.data.progressIconStatus),M("progressStatus");break;case"feedback":let n=r.data.source;"dislike"===n?s("gfDislikeFeedback"):"feedbackButton"===n?s("gfFeedback"):(console.error("Missing feedback event source from GF"),s("unknown"));break;case"showInviteButton":if(!z)return;W(r.data.inviteUrl),F.crazyAnalyticsService.gameInteractionEvent({method:"join",origin:"game",action:"broadcast",target:null,targetStatus:null,targetGameId:t.id});break;case"hideInviteButton":if(!z||!$)return;await ea({variables:{input:{joinUrl:$,gameId:t.id}}}),L(),W(null),F.crazyAnalyticsService.gameInteractionEvent({method:"join",origin:"game",action:"expire",target:null,targetStatus:null,targetGameId:t.id});break;case"showFriendsDrawer":z?M("friends"):M("friendsGuest"),F.crazyAnalyticsService.sendModalEvent("noRewardAltCTA","open","invite_friends","noRewardAltInviteFriends");break;case"showEditProfileDrawer":M("editProfile"),F.crazyAnalyticsService.sendModalEvent("noRewardAltCTA","open","complete_profile","noRewardAltCompleteProfile");break;case"showLoginDrawer":M("signIn");let i=r.data;F.crazyAnalyticsService.sendModalEvent(i.source,"open","login",i.clickOrigin);break;case"showOnMobileDrawer":M("shareOnMobile"),F.crazyAnalyticsService.sendModalEvent("noRewardAltCTA","open","on_mobile","noRewardAltPlayOnMobile");break;case"afterPlayNow":eo();break;case"nativeVideo":let c=r.data;c.play?await N(c.videoType,t.category?.enSlug):await O(c.videoType,t.category?.enSlug);break;case"completeProfile":let{gender:d}=r.data;await en(d);break;case"submitScore":let{encryptedScore:u,requestId:g}=r.data;await a(t.id,u,g);break;case"gtagEvent":let f=r.data;"event"===f.command&&F.analyticsService.trackGAEvent({eventAction:f.targetId,eventCategory:f.parameters?.event_category||"gameframe",eventLabel:f.parameters?.event_label,eventValue:f.parameters?.value,additionalFields:f.parameters})}};return window.addEventListener("message",u),function(){window.removeEventListener("message",u)}},[X,Z,F,z,r,G,T,M,t,K,Y,I,U,er,j,L,W,$,ea,H,el,es,ei,eo,E,Q,en]),o.useEffect(()=>{ee&&z&&!ei&&ee.window.postMessage({type:"gameRating-update",vote:es},"*")},[ee,z,es,ei]),ee)?(0,a.jsxs)(a.Fragment,{children:[!1,(0,a.jsx)(q,{gfSource:ee,theatreModeAvailable:r}),(0,a.jsx)(V,{game:t,gfSource:ee}),(0,a.jsx)(R,{gfSource:ee})]}):null}},35531:(e,t,r)=>{"use strict";r.d(t,{A:()=>g,S:()=>u});var a=r(74848),o=r(96540),n=r(4743),s=r(63522),i=r(59785),l=r(57780),c=r(56257),d=r.n(c);let u=()=>{let{user:e}=s.Jd();if(!e)return 100;let t=[e?.profile?.avatar,e?.profile?.cover,e?.profile?.country,e?.profile?.gender,e?.profile?.birthday];return t.filter(e=>e).length/t.length*100},g=o.memo(e=>{let{progress:t}=e,{openDrawer:r}=o.useContext(i.lv),s=o.useCallback(()=>{r("editProfile")},[r]);return(0,a.jsxs)("div",{className:d().root,onClick:s,children:[(0,a.jsxs)("div",{className:d().row,children:[(0,a.jsx)(n.x6,{id:"common.upDrawer.profileProgress",values:{number:t}}),(0,a.jsxs)("a",{className:d().completeNow,children:[(0,a.jsx)(n.x6,{id:"common.upDrawer.completeNow"}),(0,a.jsx)(l.A,{className:d().chevronRight})]})]}),(0,a.jsx)("progress",{className:d().progress,value:t,max:100})]})})},94438:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var a=r(96540),o=r(18081),n=r(43151),s=r(59386),i=r(46961),l=r(53436);function c(e){let{user:t}=(0,a.useContext)(s.R),[r,c]=(0,a.useState)(n.i.CANCEL),[d,{data:u,error:g,loading:f,called:p}]=(0,o._)(i.cg);return(0,a.useEffect)(()=>{t&&e.id?d({variables:{gameId:e.id}}):c((0,l.hO)(e.slug))},[t,e.id,e.slug,d]),(0,a.useEffect)(()=>{p&&!f&&(g?(console.error("[useUserGameVote] Error fetching user game vote:",g),c((0,l.hO)(e.slug))):u&&c(u.getUserGameVote??n.i.CANCEL))},[u,g,f,p,e.slug]),{vote:r,loading:f}}},56257:e=>{e.exports={czyButton:"ProfileCompletionProgressBar_czyButton__P6EmX","czyButton--contained--purple":"ProfileCompletionProgressBar_czyButton--contained--purple__aOIW6","czyButton--contained--white":"ProfileCompletionProgressBar_czyButton--contained--white__Q9a6_","czyButton--contained--grey":"ProfileCompletionProgressBar_czyButton--contained--grey__cfPRG","czyButton--contained--alert":"ProfileCompletionProgressBar_czyButton--contained--alert__V7D7O","czyButton--contained--success":"ProfileCompletionProgressBar_czyButton--contained--success__DnXmJ","czyButton--contained--black":"ProfileCompletionProgressBar_czyButton--contained--black__RfpVd","czyButton--contained--green-gradient":"ProfileCompletionProgressBar_czyButton--contained--green-gradient__iszWI","czyButton--contained--animated-green-gradient":"ProfileCompletionProgressBar_czyButton--contained--animated-green-gradient__7i_Ef","scroll-gradient":"ProfileCompletionProgressBar_scroll-gradient__i8F0X","czyButton--outlined--purple":"ProfileCompletionProgressBar_czyButton--outlined--purple__CDV7i","czyButton--link--purple":"ProfileCompletionProgressBar_czyButton--link--purple__SypcH","czyButton--outlined--white":"ProfileCompletionProgressBar_czyButton--outlined--white___amd1","czyButton--link--white":"ProfileCompletionProgressBar_czyButton--link--white__L9VLd","czyButton--outlined--grey":"ProfileCompletionProgressBar_czyButton--outlined--grey__3S282","czyButton--link--grey":"ProfileCompletionProgressBar_czyButton--link--grey__eCMeh","czyButton--outlined--alert":"ProfileCompletionProgressBar_czyButton--outlined--alert__YcJJx","czyButton--link--alert":"ProfileCompletionProgressBar_czyButton--link--alert__AlfkX","czyButton--outlined--success":"ProfileCompletionProgressBar_czyButton--outlined--success__NqkGR","czyButton--link--success":"ProfileCompletionProgressBar_czyButton--link--success__dJKnk","czyButton--outlined":"ProfileCompletionProgressBar_czyButton--outlined__61x05","czyButton--disabled":"ProfileCompletionProgressBar_czyButton--disabled__OrEnh","czyButton--height50":"ProfileCompletionProgressBar_czyButton--height50__dYTCe","czyButton--height34":"ProfileCompletionProgressBar_czyButton--height34__6Qr0z","czyButton--fullWidth":"ProfileCompletionProgressBar_czyButton--fullWidth__U3ej3",root:"ProfileCompletionProgressBar_root__WFVnW",row:"ProfileCompletionProgressBar_row__cSiY2",completeNow:"ProfileCompletionProgressBar_completeNow__V8Hiu",chevronRight:"ProfileCompletionProgressBar_chevronRight__nZ_1R",progress:"ProfileCompletionProgressBar_progress__H_iJd"}}}]);